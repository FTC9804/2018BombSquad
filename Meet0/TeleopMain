//Package statements
package org.firstinspires.ftc.teamcode;

//Import statements
import com.qualcomm.robotcore.eventloop.opmode.OpMode;
import com.qualcomm.robotcore.eventloop.opmode.TeleOp;
import com.qualcomm.robotcore.hardware.DcMotor;
import com.qualcomm.robotcore.hardware.DigitalChannel;
import com.qualcomm.robotcore.hardware.Servo;
import com.qualcomm.robotcore.hardware.ServoControllerEx;
import com.qualcomm.robotcore.util.Range;
import com.qualcomm.robotcore.hardware.PwmControl;
import static com.qualcomm.robotcore.hardware.DcMotorSimple.Direction.FORWARD;
import static com.qualcomm.robotcore.hardware.DcMotorSimple.Direction.REVERSE;
import org.firstinspires.ftc.robotcore.external.navigation.DistanceUnit;
import com.qualcomm.robotcore.hardware.DistanceSensor;


//Declaration for display on the driver station
@TeleOp(name = "TeleOp Test")

public class TeleopMain extends OpMode  {

    //Object Declarations
    DriveTrain DT;
    Grabber GB;
    Lifter LT;

    //Telemetry variables
    int loopCounter;
    double timeOne, timeTwo;

    public void init(){
        //Initialize our objects to the hardwareMap
         DT = new DriveTrain(hardwareMap.dcMotor.get("m2"), hardwareMap.dcMotor.get("m1"), FORWARD, REVERSE);
         GB = new Grabber(hardwareMap.dcMotor.get("m3"), hardwareMap.dcMotor.get("m4"), FORWARD, FORWARD, hardwareMap.servo.get("s1"), hardwareMap.get(DigitalChannel.class, "d1"));
         LT = new Lifter(hardwareMap.dcMotor.get("m5"), FORWARD, hardwareMap.get(DigitalChannel.class, "d2"), hardwareMap.get(DigitalChannel.class, "d3"), hardwareMap.get(DigitalChannel.class, "d4"));
    }

    public void start() {
        timeOne = this.getRuntime();
    }

    public void loop(){
        loopCounter++;

        //Set DriveTrain powers to left stick and right stick y
        DT.setLeftPower(gamepad1.left_stick_y);
        DT.setRightPower(gamepad1.right_stick_y);

        //Set reach control to left and right triggers of the driver
        GB.reach(gamepad1.left_trigger, gamepad1.right_trigger);
        //Set intake controls to the bumpers of the driver
        GB.intake(gamepad1.left_bumper, gamepad1.right_bumper);
        //Turn on the sort method
        GB.sort();

        //Set lifting and scoring controls to the bumpers of gunner
        LT.lift(gamepad2.left_bumper, gamepad2.right_bumper);


        //Telemetry for testing
        timeTwo = this.getRuntime();
        telemetry.addLine("Telemetry:");
        telemetry.addData("lps", loopCounter/(timeTwo-timeOne));
        telemetry.addData("Left Power", DT.getLeftPower());
        telemetry.addData("Right Power", DT.getRightPower());
        telemetry.addData("Rsy", gamepad1.right_stick_y);
        telemetry.addData("Lsy", gamepad1.left_stick_y);

        telemetry.update();
    }

}


